variables:
  APK_NAME: Minds.apk

# Gets the version of the app parsing the gradle.properties file
# used in build, release, and upload
.getversion:
  script:
    - 'export APPVERSION=`grep -o "^versionName=.*" android/gradle.properties | tr -d "versionName="`'

# Delete the build from browserstack
# used in build, upload
.delete_browserstack:
  script:
    - 'echo "Deleting browserstack credentials..."'
    - node tasks/deleteBrowserstackFile.js $TARGET_NAME

include:
  - local: .gitlab/ci/test.yml
  - local: .gitlab/ci/release.yml
  - local: .gitlab/ci/build.yml
  - local: .gitlab/ci/upload.yml
  - local: .gitlab/ci/integration-test.yml
  - local: .gitlab/ci/maintenance.yml

stages:
  - test
  - pushrelease
  - pushrelease_prod
  - build
  - upload
  - release
  - qa
