variables:
  APK_NAME: Minds.apk

include:
  - local: .gitlab/ci/build.yml
  - local: .gitlab/ci/maintenance.yml
  - local: .gitlab/ci/pushrelease.yml
  - local: .gitlab/ci/qa.yml
  - local: .gitlab/ci/release.yml
  - local: .gitlab/ci/test.yml
  - local: .gitlab/ci/upload.yml

stages:
  - test
  - pushrelease
  - pushrelease_prod
  - build
  - upload
  - release
  - maintenance
  - qa

# Gets the version of the app parsing the gradle.properties file
.getversion:
  script:
    - 'export APPVERSION=`grep -o "^versionName=.*" android/gradle.properties | tr -d "versionName="`'

# Delete the build from browserstack
.delete_browserstack:
  script:
    - 'echo "Deleting browserstack credentials..."'
    - node tasks/deleteBrowserstackFile.js $TARGET_NAME
